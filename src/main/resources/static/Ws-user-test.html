<!DOCTYPE html>
<html>
<head>
    <title>User WebSocket Test</title>
</head>
<body>
<h2>User ‚Äì Live Rider Location</h2>

<script>
    // üîë USER JWT (role = USER)
    const token = "eyJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJmOGM1ZWEyOC1mNTFmLTQ0ODQtYWEzMy1hMGEwNWNjNGExMTkiLCJyb2xlIjoiVVNFUiIsImlhdCI6MTc2ODk3NjY3OCwiZXhwIjoxNzY5NTgxNDc4fQ.p8V3b3XD7pqnDt4Bw4yacnQXjUNe4OsYfcGo73fd62E";

    const socket = new WebSocket(
      `ws://localhost:8081/ws/location?token=${token}`
    );

    socket.onopen = () => {
      console.log("‚úÖ USER WebSocket CONNECTED");
    };

    socket.onmessage = (event) => {
      const data = JSON.parse(event.data);
      console.log("üìç Rider Location Update:", data);

      /**
       * Expected payload:
       * {
       *   riderId: "...",
       *   lat: 12.9717,
       *   lng: 77.5948,
       *   timestamp: 1736668200
       * }
       */
    };

    socket.onerror = (e) => {
      console.error("‚ùå USER WebSocket ERROR", e);
    };

    socket.onclose = () => {
      console.warn("‚ö†Ô∏è USER WebSocket CLOSED");
    };
</script>
</body>
</html>